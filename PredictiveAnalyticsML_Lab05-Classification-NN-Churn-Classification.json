{"paragraphs":[{"title":"Over view of Neural network classification experiment ","text":"%md\n%%% yuml type=activity scale=80 dir=LR \n(data)[random 70%]->(trainingData),(data)[random 30%]->(tesData),(trainingData)[fit]->|b|,|b|->(combineFeature),(combineFeature)->(scaler),(scaler)[Standardized]->(NN),(NN)->|c|,|c|->(<combineFeature>),(<combineFeature>)->(<scaler>),(<scaler>)[Standardized]->(<NN>),(<NN>)->|d|,(tesData)->|c|,|d|[transform]->(prediction)\n%%%","user":"anonymous","dateUpdated":"2020-10-31T03:27:05+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174089_-1075783378","id":"20180420-163423_119657940","dateCreated":"2020-10-31T03:16:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:27472","dateFinished":"2020-10-31T03:27:07+0000","dateStarted":"2020-10-31T03:27:05+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<img src=\"http://yuml.me/diagram/scruffy;dir:LR;scale:80/activity/%28data%29%5Brandom+70%25%5D-%3E%28trainingData%29%2C%28data%29%5Brandom+30%25%5D-%3E%28tesData%29%2C%28trainingData%29%5Bfit%5D-%3E%7Cb%7C%2C%7Cb%7C-%3E%28combineFeature%29%2C%28combineFeature%29-%3E%28scaler%29%2C%28scaler%29%5BStandardized%5D-%3E%28NN%29%2C%28NN%29-%3E%7Cc%7C%2C%7Cc%7C-%3E%28%3CcombineFeature%3E%29%2C%28%3CcombineFeature%3E%29-%3E%28%3Cscaler%3E%29%2C%28%3Cscaler%3E%29%5BStandardized%5D-%3E%28%3CNN%3E%29%2C%28%3CNN%3E%29-%3E%7Cd%7C%2C%28tesData%29-%3E%7Cc%7C%2C%7Cd%7C%5Btransform%5D-%3E%28prediction%29.svg\" title=\"title\" />\n</div>"}]}},{"title":"Using","text":"%md\n%%% yuml type=activity scale=80 dir=LR \n<a>[load]->(data),(data)->|b|,<c>[load pipeline]->(<combineFeature>),|b|->(<combineFeature>),(<combineFeature>)->(<scaler>),(<scaler>)[Standardized]->(<NN>),(<NN>)->|c|,|c|[transform]->(prediction)\n%%%","user":"anonymous","dateUpdated":"2020-10-31T03:27:11+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174089_-11659300","id":"20180420-163430_1328743461","dateCreated":"2020-10-31T03:16:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:27473","dateFinished":"2020-10-31T03:27:11+0000","dateStarted":"2020-10-31T03:27:11+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<img src=\"http://yuml.me/diagram/scruffy;dir:LR;scale:80/activity/%3Ca%3E%5Bload%5D-%3E%28data%29%2C%28data%29-%3E%7Cb%7C%2C%3Cc%3E%5Bload+pipeline%5D-%3E%28%3CcombineFeature%3E%29%2C%7Cb%7C-%3E%28%3CcombineFeature%3E%29%2C%28%3CcombineFeature%3E%29-%3E%28%3Cscaler%3E%29%2C%28%3Cscaler%3E%29%5BStandardized%5D-%3E%28%3CNN%3E%29%2C%28%3CNN%3E%29-%3E%7Cc%7C%2C%7Cc%7C%5Btransform%5D-%3E%28prediction%29.svg\" title=\"title\" />\n</div>"}]}},{"title":"Download ข้อมูล","text":"%sh\nif ! hdfs dfs -test -e \"/user/zeppelin/dataset\"; then\n    hdfs dfs -mkdir -p /user/zeppelin/dataset\nfi\nif ! hdfs dfs -test -e \"/user/zeppelin/dataset/churn_data.csv\"; then\n    wget  https://github.com/praisan/hello-world/raw/master/churn_data.csv\n    hdfs dfs -put churn_data.csv /user/zeppelin/dataset\nfi","user":"anonymous","dateUpdated":"2020-10-31T03:18:52+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174089_-73011504","id":"20180420-083255_1448992339","dateCreated":"2020-10-31T03:16:14+0000","dateStarted":"2020-10-31T03:18:52+0000","dateFinished":"2020-10-31T03:18:59+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27474"},{"title":"DataFrame","text":"%pyspark\n# 1. Load data\ndata=spark.read.csv(\"/user/zeppelin/dataset/churn_data.csv\",inferSchema=True,header=True)\ndata = data.withColumnRenamed(\"Churn\",\"label\")\nprint(\"1.1 Load data\")\ndata.printSchema()\ndata.show(5)","user":"anonymous","dateUpdated":"2020-10-31T03:19:02+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=1223","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=1224","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=1225"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1604114174089_-1921173355","id":"20180420-104428_2111886087","dateCreated":"2020-10-31T03:16:14+0000","dateStarted":"2020-10-31T03:19:02+0000","dateFinished":"2020-10-31T03:19:02+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27475"},{"text":"%pyspark\n(trainingSet, testSet) = data.randomSplit([0.7, 0.3],seed=10)\nz.show(trainingSet)","user":"anonymous","dateUpdated":"2020-10-31T03:19:08+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","editorHide":false,"fontSize":9,"results":{"0":{"graph":{"mode":"scatterChart","height":300,"optionOpen":false,"setting":{"lineChart":{},"scatterChart":{"group":{"name":"label","index":20,"aggr":"sum"},"xAxis":{"name":"DayMins","index":2,"aggr":"sum"},"yAxis":{"name":"EveMins","index":3,"aggr":"sum"},"size":{"name":"label","index":20,"aggr":"sum"}}},"keys":[{"name":"Sensor3","index":7,"aggr":"sum"}],"groups":[],"values":[{"name":"label","index":26,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=1226"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1604114174090_2141078347","id":"20180420-103403_455918027","dateCreated":"2020-10-31T03:16:14+0000","dateStarted":"2020-10-31T03:19:08+0000","dateFinished":"2020-10-31T03:19:08+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27476"},{"title":"Transformers and Parameters","text":"%pyspark\nfrom pyspark.ml import Pipeline\nfrom pyspark.ml.feature import VectorAssembler, StandardScaler\nfrom pyspark.ml.tuning import ParamGridBuilder, TrainValidationSplit\nfrom pyspark.ml.classification import MultilayerPerceptronClassifier\nfrom pyspark.ml.evaluation import MulticlassClassificationEvaluator\n\n# Transformers\ncombineFeature = VectorAssembler(\n    inputCols=[\"DayMins\", \"EveMins\", \"NightMins\", \"IntlMins\", \"CustServCalls\"],\n    outputCol=\"combinedFeatures\")\n\n# Transformers   \nscaler = StandardScaler(inputCol=\"combinedFeatures\", outputCol=\"features\",\n                        withStd=True, withMean=True)\n\n# Transformers\nnn = MultilayerPerceptronClassifier(maxIter=1000,layers=[5,8,4,2])\n\n# Model selection and hyperparameter tuning\nparamGrid = ParamGridBuilder().addGrid(nn.layers, [[5,8,4,2],[5,10,2]]).build()\n\ntvs = TrainValidationSplit(estimator=nn,\n                          estimatorParamMaps=paramGrid,\n                          evaluator=MulticlassClassificationEvaluator(metricName=\"f1\"),\n                          # 80% of the data will be used for training, 20% for validation.\n                          trainRatio=0.8)\n# Pipeline \n#  TrainValidationSplit\npipeline = Pipeline(stages=[combineFeature,scaler, tvs])\n#  pure NN\n#pipeline = Pipeline(stages=[combineFeature,scaler, nn])\n","user":"anonymous","dateUpdated":"2020-10-31T03:26:50+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174090_986289381","id":"20180420-083718_1926967630","dateCreated":"2020-10-31T03:16:14+0000","dateStarted":"2020-10-31T03:22:07+0000","dateFinished":"2020-10-31T03:22:07+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27477"},{"title":"Model Traning","text":"%pyspark\n# Estimator\nmodel = pipeline.fit(trainingSet)","user":"anonymous","dateUpdated":"2020-10-31T03:26:51+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","editorHide":false,"fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5652","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5653","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5654","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5655","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5656","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5657","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5658","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5659","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5660","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5661","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5662","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5663","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5664","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5665","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5666","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5667","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5668","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5669","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5670","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5671","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5672","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5673","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5674","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5675","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5676","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5677","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5678","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5679","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5680","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5681","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5682","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5683","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5684","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5685","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5686","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5687","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5688","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5689","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5690","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5691","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5692","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5693","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5694","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5695","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5696","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5697","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5698","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5699","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5700","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5701","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5702","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5703","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5704","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5705","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5706","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5707","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5708","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5709","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5710","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5711","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5712","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5713","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5714","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5715","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5716","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5717","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5718","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5719","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5720","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5721","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5722","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5723","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5724","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5725","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5726","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5727","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5728","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5729"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1604114174090_-1264335747","id":"20180420-083749_1825669107","dateCreated":"2020-10-31T03:16:14+0000","dateStarted":"2020-10-31T03:26:51+0000","dateFinished":"2020-10-31T03:26:54+0000","status":"ABORT","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27478"},{"text":"%pyspark\n#  TrainValidationSplit only\nprint(\"Num of weights = %d\"%len(model.stages[2].bestModel.weights))\nmodel.stages[2].bestModel.weights\n","user":"anonymous","dateUpdated":"2020-10-31T03:25:50+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114684008_1975319706","id":"20201031-032444_1495281646","dateCreated":"2020-10-31T03:24:44+0000","dateStarted":"2020-10-31T03:25:37+0000","dateFinished":"2020-10-31T03:25:37+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27479"},{"text":"%pyspark\n# pure nn only\nprint(\"Num of weights = %d\"%len(model.stages[2].weights))\nmodel.stages[2].weights","user":"anonymous","dateUpdated":"2020-10-31T03:26:02+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174090_-1276708211","id":"20180420-111722_1498007173","dateCreated":"2020-10-31T03:16:14+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27480"},{"title":"Model Using","text":"%pyspark\n# Transformers\nprediction = model.transform(testSet)","user":"anonymous","dateUpdated":"2020-10-31T03:26:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174090_-1966679148","id":"20180420-100433_1980506948","dateCreated":"2020-10-31T03:16:14+0000","dateStarted":"2020-10-31T03:26:13+0000","dateFinished":"2020-10-31T03:26:13+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27481"},{"text":"%pyspark\nz.show(prediction)","user":"anonymous","dateUpdated":"2020-10-31T03:16:14+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"AccountLength":"string","VMailMessage":"string","DayMins":"string","EveMins":"string","NightMins":"string","IntlMins":"string","CustServCalls":"string","IntPlan":"string","VMailPlan":"string","DayCalls":"string","DayCharge":"string","EveCalls":"string","EveCharge":"string","NightCalls":"string","NightCharge":"string","IntlCalls":"string","IntlCharge":"string","State":"string","AreaCode":"string","Phone":"string","label":"string","combinedFeatures":"string","features":"string","rawPrediction":"string","probability":"string","prediction":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174090_508008509","id":"20180420-160029_668256473","dateCreated":"2020-10-31T03:16:14+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27482"},{"title":"Analyze results","text":"%pyspark\nevaluator = MulticlassClassificationEvaluator(predictionCol=\"prediction\", labelCol=\"label\")\nprint(\"Accuracy\",evaluator.evaluate(prediction, {evaluator.metricName: \"accuracy\"}))\nprint(\"F1\",evaluator.evaluate(prediction, {evaluator.metricName: \"f1\"}))","user":"anonymous","dateUpdated":"2020-10-31T03:26:17+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","editorHide":false,"fontSize":9,"title":true,"results":{"1":{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"setting":{"lineChart":{"lineWithFocus":false}},"commonSetting":{},"keys":[{"name":"Date","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"label","index":1,"aggr":"sum"},{"name":"prediction","index":11,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5647","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5648","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5649","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5650","http://hadoop-cluster-2020-msc-m.c.teaching-sit-kmutt.internal:4040/jobs/job?id=5651"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1604114174091_1052217019","id":"20180420-100757_1596878955","dateCreated":"2020-10-31T03:16:14+0000","dateStarted":"2020-10-31T03:26:18+0000","dateFinished":"2020-10-31T03:26:18+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27483"},{"text":"%pyspark\nfrom pyspark.mllib.evaluation import MulticlassMetrics\nmetrics = MulticlassMetrics(prediction[[\"prediction\",\"label\"]].rdd.map(lambda x:[float(x[0]),float(x[1])]))\n\n# Confusion matrix\nprint(\"Confusion matrix:\")\nprint(metrics.confusionMatrix())","user":"anonymous","dateUpdated":"2020-10-31T03:16:14+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1604114174091_-1495286526","id":"20180420-160954_1605359117","dateCreated":"2020-10-31T03:16:14+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:27484"}],"name":"PredictiveAnalyticsML/Lab05-Classification-NN-Churn-Classification","id":"2FNHQXCSB","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"sh:shared_process":[],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}